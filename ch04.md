# Prototipos en JS

En JavaScript todo es esencialmente un objeto.

Ya vimos los objetos simples, y se mencion√≥ de paso que un objeto simple puede contener otros objetos simples.

```javascript
const pais = {
  nombre: "Francia",
  habitantes: 68_035_000,
};
```

Aqu√≠ vemos un ejemplo, el objeto pa√≠s tiene dos propiedades.

Abre la consola en tu navegador o en Node (con la terminal de tu sistema operativo escribe `node` y presiona `Enter` para entrar) y copia ese objeto.

Podemos acceder a las propiedades del objeto como ya hemos visto antes. Probemos la notaci√≥n de puntos,

```javascript
pais.nombre; // 'Francia'
```

Ahora hagamos algo raro,

Escribe,

```javascript
pais.__proto__; // Con dos guiones bajos a cada lado de la palabra proto (de prototipo)
```

Obtenemos una respuesta rara,

```javascript
{__defineGetter__: ∆í, __defineSetter__: ∆í, hasOwnProperty: ∆í, __lookupGetter__: ∆í, __lookupSetter__: ∆í, ‚Ä¶}
```

Aunque por el momento no entendemos de d√≥nde sale ese objeto, podemos entender que _es_ un objeto.

Ahora hagamos lo mismo pero diferente.

Exploremos los objetos de n√∫meros.

Escribe esto (puede ser sin los par√©ntesis),

```javascript
(3.141592).__proto__;
```

Obtenemos una respuesta misteriosa.

```javascript
Number {0, toExponential: ∆í, toFixed: ∆í, toPrecision: ∆í, toString: ∆í, ‚Ä¶}
```

Obtenmos un objeto de nombre `Number` que tiene algunas propiedades qu√© no sabemos de d√≥nde salieron tampoco, pero se puede intuir su funcionamiento por su nombre.

Por ejemplo, si escribimos,

```javascript
(3.141592).toFixed(2); // '3.14'
```

Aqu√≠ podemos observar que pasan dos cosas. Primero, convierte el n√∫mero inicial es un texto (se ve por las comillas). Segundo, a ese texto simplemente le recorta los decimales luego del segundo. Entonces vemos que `toFixed` es un _m√©todo_ aplicable a n√∫meros que nos ayuda a fijar los decimales que deseamos de un n√∫mero. Pero JavaScript en particular para lograrlo, debe primero convertir el n√∫mero a texto.

Aqu√≠ vemos los objetos ex√≥ticos en acci√≥n.

Los objetos ex√≥ticos son _parecidos_ a los que ya conoces, pero con la diferencia de que (1) no los hiciste t√∫ y (2) el motor de JavaScript trae "pre-configuraciones" sobre c√≥mo funcionan.

De hecho, si escribimos simplemente `Number` en consola (el nombre del objeto que vimos arriba), la consola nos responde con,

```javascript
Number() { [native code] }
```

Sigamos con los experimentos raros.

Escribe,

```javascript
(3.141592).__proto__.__proto__;
```

Estamos "encadenando" dos llamadas, primero para ver el prototipo del n√∫mero, y luego para ver el prototipo de ese prototipo ü§Ø.

La respuesta, aunque extra√±a, ya deber√≠a de sernos conocida:

```javascript
{__defineGetter__: ∆í, __defineSetter__: ∆í, hasOwnProperty: ∆í, __lookupGetter__: ∆í, __lookupSetter__: ∆í, ‚Ä¶}
```

Vayamos un poco m√°s lejos,

```javascript
//           Number    Object    null
(3.141592).__proto__.__proto__.__proto__;
```

Ahora recibimos un "objeto nulo" (`null`). Es decir, ya no existe un prototipo encima del anterior.

Lo que vemos en la respuesta extra√±a de arriba (`{__defineGetter__: ∆í, ...`) es el protitpo b√°sico de un objeto, que se apega a todos los objetos en JavaScript, tanto ex√≥ticos y simples. Incluso los ejecutables.

Todos los objetos en JavaScript van heredando de otros prototipos, como vimos con `Number` arriba, pero el que est√° hasta arriba, el objeto primordial, es este.

As√≠ por ejemplo, `123` recibe de prototipo `Number` que a su vez recibe de prototipo `Object`, que es lo que le permite funcionr como objeto e interactuar con otros objetos. Por esto mismo, todo en JS es un objeto.

Cuando hablamos de prototipos, hablamos de un tipo de objeto especial que en esencia define el _comportamiento_ y _estructura_ de los objetos que se basen en √©l. Como una casa se basa en su plano arquitect√≥nico, o su prototipo.

Existen muchos objetos ex√≥ticos, podemos pensar que aquellos asociados a los tipos de datos nativos, como `String`, `Number` y `Boolean` lo son, pero tambi√©n hay muchos otros que a√∫n no conocemos, como `Array`, `Proxy`, `Reflect`, generadores (un tipo especial de funciones).

En el caso de los navegadores, ellos introducen otros objetos ex√≥ticos, como `XMLHttpRequest` / `fetch()` para hacer peticiones de datos a alg√∫n servidor, el DOM que incluye `NodeList`, `HTMLElement` y `DocumentFragment` entre otros que representan a su modo elementos de HTML. Tambi√©n de geolocalizaci√≥n donde el API accede a inforaci√≥n geogr√°fica del sistema y los workers que delegan actividades a subprocesos, por mencionar algunos.

Nosotros no podr√≠amos recrear ninguno de estos objetos especiales por m√°s que nos esforcemos, sin tener que crear un ambiente propio con JavaScript (nuestro propio motor o anfitri√≥n del lenguaje).

## Hablemos de prototipos

Ya conocemos los protitpos, ya jugaste con algunos tanto de objetos ordinarios como ex√≥ticos.

Pero hablemos m√°s formalmente de ellos.

Como puse arriba, un prototipo es
